<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="style.css">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes" />
<link rel="icon" type="image/x-icon" href="img/favicon.ico">
<!--Nathan A. | W1217574 | 12/09/2020-->
<!--Inline CSS line 195 and 215-->
<title>Death Machine - Store</title>

<body>
   <div class="wrapper">
      <header>
         <img src="img/banner.png" alt="Death Machine" width="1200" height="125" />
         <nav>
            <a href="index.html">Home</a>
            <a href="news.html">News</a>
            <a href="tour.html">Tour</a>
            <a href="music.html">Music</a>
            <a class="active" href="store.html">Store</a>
            <!--active class will display the current page link in a darker color-->
         </nav>
      </header>
      <div class="content">
         <div class="middle">
            <!--I created all of the product images using illustrator and photoshop (UPDATE 2026: ChatGPT was used to remake the clothing images into real clothes.) Original images are in /old and can be seen by puting /old befor ethe image in the url-->

            <!--Store sub-nav-->
            <div class="storebar" aria-label="Store Navigation">
               <div class="storebar-left">
                  <button class="storetab is-active" type="button" data-tab="clothing">Clothing</button>
                  <button class="storetab" type="button" data-tab="accessories">Accessories</button>
                  <button class="storetab" type="button" data-tab="music">Music</button>
               </div>

               <div class="storebar-right">
                  <button class="storetab cartbtn" type="button" id="cartBtn">
                     Cart <span class="cartcount" id="cartCount">0</span>
                  </button>
               </div>
            </div>

            <br />

            <!--<div class="news">
               <img src="img/merchbanner.png" alt="New Merch!" width="800" height="200" />
            </div>-->

            <br />

            <!-- TAB: Clothing -->
            <section class="storepanel is-active" id="tab-clothing" aria-label="Clothing">
               <div class="store">
                  <!-- CLOTHING PRODUCTS -->

                  <div class="product" data-name="2021 T-Shirt" data-price="20.00">
                     <img src="store/tshirt.png" alt="T-Shirt"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">2021 T-Shirt</label>
                        <br />
                        <label class="price">$20.00</label>
                        <br />
                        <label for="shirtsize">Size</label>
                        <select name="shirtsize" id="shirtsize">
                           <option disabled selected value>--</option>
                           <option value="XS">XS</option>
                           <option value="S">S</option>
                           <option value="M">M</option>
                           <option value="L">L</option>
                           <option value="XL">XL</option>
                           <option value="XXL">XXL</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="2021 Tanktop" data-price="15.00">
                     <img src="store/tanktop.png" alt="Tanktop"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">2021 Tanktop</label>
                        <br />
                        <label class="price">$15.00</label>
                        <br />
                        <label for="tanksize">Size</label>
                        <select name="tanksize" id="tanksize">
                           <option disabled selected value>--</option>
                           <option value="XS">XS</option>
                           <option value="S">S</option>
                           <option value="M">M</option>
                           <option value="L">L</option>
                           <option value="XL">XL</option>
                           <option value="XXL">XXL</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="2021 Hoodie" data-price="40.00">
                     <img src="store/hoodie.png" alt="Hoodie"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">2021 Hoodie</label>
                        <br />
                        <label class="price">$40.00</label>
                        <br />
                        <label for="hoodiesize">Size</label>
                        <select name="hoodiesize" id="hoodiesize">
                           <option disabled selected value>--</option>
                           <option value="XS">XS</option>
                           <option value="S">S</option>
                           <option value="M">M</option>
                           <option value="L">L</option>
                           <option value="XL">XL</option>
                           <option value="XXL">XXL</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="2021 Beanie" data-price="10.00">
                     <img src="store/beanie.png" alt="Skullcap Beanie"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">2021 Beanie</label>
                        <br />
                        <label class="price">$10.00</label>
                        <br />
                        <label for="capsize">Size</label>
                        <select name="capsize" id="capsize">
                           <option disabled selected value>--</option>
                           <option value="S">Child</option>
                           <option value="L">Adult</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Death Machine T-Shirt" data-price="20.00">
                     <img src="store/DeathMachineShirt.png" alt="T-Shirt"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">Death Machine T-Shirt</label>
                        <br />
                        <label class="price">$20.00</label>
                        <br />
                        <label for="shirtsize">Size</label>
                        <select name="shirtsize" id="shirtsize">
                           <option disabled selected value>--</option>
                           <option value="XS">XS</option>
                           <option value="S">S</option>
                           <option value="M">M</option>
                           <option value="L">L</option>
                           <option value="XL">XL</option>
                           <option value="XXL">XXL</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Trash T-Shirt" data-price="20.00">
                     <img src="store/TrashShirt.png" alt="T-Shirt"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">Trash T-Shirt</label>
                        <br />
                        <label class="price">$20.00</label>
                        <br />
                        <label for="shirtsize">Size</label>
                        <select name="shirtsize" id="shirtsize">
                           <option disabled selected value>--</option>
                           <option value="XS">XS</option>
                           <option value="S">S</option>
                           <option value="M">M</option>
                           <option value="L">L</option>
                           <option value="XL">XL</option>
                           <option value="XXL">XXL</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="DM No Future T-Shirt" data-price="20.00">
                     <img src="store/DMNoFutureShirt.png" alt="T-Shirt"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">DM No Future T-Shirt</label>
                        <br />
                        <label class="price">$20.00</label>
                        <br />
                        <label for="shirtsize">Size</label>
                        <select name="shirtsize" id="shirtsize">
                           <option disabled selected value>--</option>
                           <option value="XS">XS</option>
                           <option value="S">S</option>
                           <option value="M">M</option>
                           <option value="L">L</option>
                           <option value="XL">XL</option>
                           <option value="XXL">XXL</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="No Future T-Shirt" data-price="20.00">
                     <img src="store/NoFutureShirt.png" alt="T-Shirt"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">No Future T-Shirt</label>
                        <br />
                        <label class="price">$20.00</label>
                        <br />
                        <label for="shirtsize">Size</label>
                        <select name="shirtsize" id="shirtsize">
                           <option disabled selected value>--</option>
                           <option value="XS">XS</option>
                           <option value="S">S</option>
                           <option value="M">M</option>
                           <option value="L">L</option>
                           <option value="XL">XL</option>
                           <option value="XXL">XXL</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Slaughter Warrior General T-Shirt" data-price="20.00">
                     <img src="store/SlaughterGeneralShirt.png" alt="T-Shirt"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">Slaughter Warrior General T-Shirt</label>
                        <br />
                        <label class="price">$20.00</label>
                        <br />
                        <label for="shirtsize">Size</label>
                        <select name="shirtsize" id="shirtsize">
                           <option disabled selected value>--</option>
                           <option value="XS">XS</option>
                           <option value="S">S</option>
                           <option value="M">M</option>
                           <option value="L">L</option>
                           <option value="XL">XL</option>
                           <option value="XXL">XXL</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Neon Sunset T-Shirt" data-price="20.00">
                     <img src="store/RetroWavetshirt.png" alt="T-Shirt"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />

                     <form onsubmit="return false;">
                        <label class="productname">Neon Sunset T-Shirt</label>
                        <br />
                        <label class="price">$20.00</label>
                        <br />
                        <label for="shirtsize">Size</label>
                        <select name="shirtsize" id="shirtsize">
                           <option disabled selected value>--</option>
                           <option value="XS">XS</option>
                           <option value="S">S</option>
                           <option value="M">M</option>
                           <option value="L">L</option>
                           <option value="XL">XL</option>
                           <option value="XXL">XXL</option>
                        </select>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

               </div>
            </section>

            <!-- TAB: Accessories-->
            <section class="storepanel" id="tab-accessories" aria-label="Accessories">
               <div class="store">

                  <div class="product" data-name="MEGALITH Tour Patch" data-price="10.00">
                     <img src="store/MEGALITHtourpatch.png" alt="MEGALITH Tour Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">MEGALITH Tour Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="MEGALITH Patch" data-price="10.00">
                     <img src="store/Megalithpatch.png" alt="MEGALITH Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">MEGALITH Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Slaughter Tour Patch" data-price="10.00">
                     <img src="store/slaughtertourpatch.png" alt="Slaughter Tour Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">Slaughter Tour Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Slaughter Patch" data-price="10.00">
                     <img src="store/Slaughterpatch.png" alt="Slaughter Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">Slaughter Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="AIYH Tour Patch" data-price="10.00">
                     <img src="store/AIYHtourpatch.png" alt="AIYH Tour Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">AIYH Tour Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="AIYH Patch" data-price="10.00">
                     <img src="store/AIYHpatch.png" alt="AIYH Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">AIYH Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Believe Tour Patch" data-price="10.00">
                     <img src="store/BelieveTourPatch.png" alt="Believe Tour Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">Believe Tour Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Believe Patch" data-price="10.00">
                     <img src="store/Believepatch.png" alt="Believe Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">Believe Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="MGC Tour Patch" data-price="10.00">
                     <img src="store/MGCtourpatch.png" alt="MGC Tour Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">MGC Tour Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="MGC Patch" data-price="10.00">
                     <img src="store/MGCpatch.png" alt="MGC Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">MGC Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="DM No Future Patch" data-price="10.00">
                     <img src="store/nofuturepatch.png" alt="DM No Future Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">DM No Future Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="DM Tour Patch" data-price="10.00">
                     <img src="store/DMTourpatch.png" alt="DM Tour Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">DM Tour Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="DM Patch" data-price="10.00">
                     <img src="store/DMpatch.png" alt="DM Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">DM Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Garage Days SDM Patch" data-price="10.00">
                     <img src="store/GarageDayspatch.png" alt="Garage Days SDM Patch"
                        style="width:100%; height:474px; object-fit:contain; display:block; background:#2d2d2d;" />
                     <form onsubmit="return false;">
                        <label class="productname">Garage Days SDM Patch</label>
                        <br /><br />
                        <label class="price">$10.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

               </div>
            </section>



            <!-- TAB: Music -->
            <section class="storepanel" id="tab-music" aria-label="Music">
               <div class="store">
                  <!-- MUSIC PRODUCTS -->

                  <div class="product" data-name="Megalith (2020) - Vinyl" data-price="40.00">
                     <img class="product-img product-img-vinyl" src="store/2020_vinyl.png"
                        alt="Death Machine - Megalith - 2020 - Vinyl" />
                     <form onsubmit="return false;">
                        <label class="productname">
                           Megalith (2020) Vinyl
                        </label>
                        <br /><br />
                        <label class="price">$40.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Slaughter (2017) - Vinyl" data-price="40.00">
                     <img class="product-img product-img-vinyl" src="store/2017_vinyl.png"
                        alt="Death Machine - Slaughter - 2017 - Vinyl" />
                     <form onsubmit="return false;">
                        <label class="productname">
                           Slaughter (2017) Vinyl
                        </label>
                        <br /><br />
                        <label class="price">$40.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Believe (2015) - Vinyl" data-price="40.00">
                     <img class="product-img product-img-vinyl" src="store/2015_vinyl.png"
                        alt="Death Machine - Believe - 2015 - Vinyl" />
                     <form onsubmit="return false;">
                        <label class="productname">
                           Believe (2015) Vinyl
                        </label>
                        <br /><br />
                        <label class="price">$40.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="All in your head. (2013) - Vinyl" data-price="40.00">
                     <img class="product-img product-img-vinyl" src="store/2013_vinyl.png"
                        alt="Death Machine - All in your head. - 2013 - Vinyl" />
                     <form onsubmit="return false;">
                        <label class="productname">
                           All in your head. (2013) Vinyl
                        </label>
                        <br /><br />
                        <label class="price">$40.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Mechanic God Creation (2012) - Vinyl" data-price="40.00">
                     <img class="product-img product-img-vinyl" src="store/2012_vinyl.png"
                        alt="Death Machine - Mechanic God Creation - 2012 - Vinyl" />
                     <form onsubmit="return false;">
                        <label class="productname">
                           Mechanic God Creation (2012) Vinyl
                        </label>
                        <br /><br />
                        <label class="price">$40.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

                  <div class="product" data-name="Death Machine (2011)" data-price="40.00">
                     <img class="product-img product-img-vinyl" src="store/2011_vinyl.png"
                        alt="Death Machine 2011 - Record" />
                     <form onsubmit="return false;">
                        <label class="productname">
                           Death Machine (2011) Vinyl
                        </label>
                        <br /><br />
                        <label class="price">$40.00</label>
                        <br /><br />
                        <button class="addbtn" type="button">Add to Cart</button>
                     </form>
                  </div>

               </div>
            </section>

            <!-- Cart drawer -->
            <div class="cartdrawer" id="cartDrawer" aria-label="Cart Drawer" aria-hidden="true">
               <div class="cartdrawer-head">
                  <div class="cartdrawer-title">Cart</div>
                  <button class="cartdrawer-close" type="button" id="cartClose">X</button>
               </div>

               <div class="cartdrawer-body">
                  <div class="cartitems" id="cartItems"></div>

                  <div class="cartcoupon">
                     <label for="coupon">Coupon code</label>
                     <input id="coupon" type="text" placeholder="DM-IS-NOT-REAL" />
                     <button type="button" id="applyCoupon">Apply</button>
                     <div class="couponmsg" id="couponMsg"></div>
                  </div>
               </div>

               <div class="cartdrawer-foot">
                  <div class="carttotal" id="cartTotal">$0.00</div>
                  <button class="checkoutbtn" type="button" onclick="location.href='cart.html'">Checkout</button>
               </div>
            </div>
            <div class="cartbackdrop" id="cartBackdrop" aria-hidden="true"></div>


            <br />
            <div class="newscontainer" style="border-radius: 15px;">
               <a id="newsletter"></a>
               <br />
               <div class="news raffle-banner">
                  <img src="img/rafflebanner_new.png"
                     alt="Enter to win a custom Death Machine Guitar! But not really..." />
               </div>
               <form target="_blank"
                  action="mailto:nvmdonttalktome@nah.com?subject=Death%20Machine%20-%20Guitar%20Raffle!&body=Hello%2C%0A%0APlease%20email%20me%20entirely%20too%20often%2C%20so%20that%20I%20may%20enter%20to%20possibly%20win%2C%20but%20definitely%20not%20win%2C%20the%20guitar%20that%20does%20not%20exist%20in%20reality.%0A%0ALove%2C%0A%0AYour%20Biggest%20Fan!%0A%0A%0A"
                  method="post">
                  <!--link above is a pregenerated email-->
                  <label class="signup">Sign up for your chance to win a custom Death Machine Guitar!</label>
                  <div class="formitem"><label for="name">Name:</label>
                     <input id="name" />
                  </div>
                  <div class="formitem"><label for="email">Email:</label>
                     <input id="email" />
                  </div>
                  <label style="display: block; padding-left: 15px; text-indent: -15px; font-style: italic;">
                     <input type="checkbox"
                        style="width: 15px; height: 15px; padding: 0; margin: 0; vertical-align: bottom; position: relative; top: -1px;" />
                     Please sell my data and email me entirely too often!
                  </label>
                  <label class="nope">*Disaclaimer: Raffle is not real. Custom guitar is not real. Signing up will do
                     nothing.*</label><!--gotta stress that it's not a real thing...-->
                  <input type="submit" onclick="location.href='error.html'" value="Sign Up!" />
               </form>
            </div>
         </div>
      </div>
      <footer>
         Copyright <a href="../index.html">Death Machine</a> 2022 &copy;
         <small>Fictional band website created as a school project. Not an actual band.</small>
      </footer>
   </div>
   <a href="https://nathanarcuri.com/projects.html#school"
      style="position:fixed;top:12px;left:12px;z-index:9999;padding:8px 14px;background:#111;color:#fff;border-radius:8px;text-decoration:none;font-weight:600;box-shadow:0 4px 12px rgba(0,0,0,.4);">‚Üê
      Projects</a>


   <script>
      const CART_KEY = "dm_cart_v1";

      function loadCart() {
         try { return JSON.parse(localStorage.getItem(CART_KEY)) || []; }
         catch (e) { return []; }
      }

      function saveCart(items) {
         localStorage.setItem(CART_KEY, JSON.stringify(items));
      }

      function money(n) {
         const x = Number(n || 0);
         return "$" + x.toFixed(2);
      }

      function getVariantText(productEl) {
         const selects = productEl.querySelectorAll("select");
         const parts = [];
         selects.forEach(sel => {
            const v = sel.value;
            if (v && v !== "--") parts.push(v);
         });
         return parts.join(" / ");
      }

      function getProductImage(productEl) {
         const img = productEl.querySelector("img");
         return img ? img.getAttribute("src") : "";
      }

      function addToCart(productEl) {
         const name = productEl.getAttribute("data-name") || "Item";
         const price = Number(productEl.getAttribute("data-price") || 0);

         const variant = getVariantText(productEl);
         const img = getProductImage(productEl);

         const cart = loadCart();
         cart.push({
            id: Date.now() + "_" + Math.random().toString(16).slice(2),
            name,
            price,
            variant,
            img
         });

         saveCart(cart);
         renderCart();
         openCart();

         productEl.querySelectorAll("select").forEach(sel => {
            sel.selectedIndex = 0;
         });
      }

      function removeFromCart(id) {
         const cart = loadCart().filter(x => x.id !== id);
         saveCart(cart);
         renderCart();
      }

      function renderCart() {
         const cart = loadCart();
         const cartItems = document.getElementById("cartItems");
         const cartCount = document.getElementById("cartCount");
         const cartTotal = document.getElementById("cartTotal");

         cartCount.textContent = cart.length;

         if (!cart.length) {
            cartItems.innerHTML = '<div class="cartempty">Empty cart, Empty Heart üíî</div>';
            cartTotal.textContent = money(0);
            return;
         }

         let total = 0;
         cartItems.innerHTML = cart.map(item => {
            total += Number(item.price || 0);
            const v = item.variant ? `<div class="cartvariant">${item.variant}</div>` : "";
            return `
  <div class="cartitem">
    <img class="cartthumb" src="${item.img || ""}" alt="" loading="lazy">
    <div class="cartitem-main">
      <div class="cartitem-name">${item.name}</div>
      ${v}
      <div class="cartitem-price">${money(item.price)}</div>
    </div>
    <button class="cartremove" type="button" data-remove="${item.id}">üóëÔ∏è</button>
  </div>
`;
         }).join("");

         cartTotal.textContent = money(total);

         cartItems.querySelectorAll("[data-remove]").forEach(btn => {
            btn.addEventListener("click", () => removeFromCart(btn.getAttribute("data-remove")));
         });
      }

      function openCart() {
         const drawer = document.getElementById("cartDrawer");
         const backdrop = document.getElementById("cartBackdrop");
         drawer.classList.add("is-open");
         backdrop.classList.add("is-open");
         drawer.setAttribute("aria-hidden", "false");
         backdrop.setAttribute("aria-hidden", "false");
      }

      function closeCart() {
         const drawer = document.getElementById("cartDrawer");
         const backdrop = document.getElementById("cartBackdrop");
         drawer.classList.remove("is-open");
         backdrop.classList.remove("is-open");
         drawer.setAttribute("aria-hidden", "true");
         backdrop.setAttribute("aria-hidden", "true");
      }

      function switchTab(tabName, updateHash = true) {
         document.querySelectorAll(".storetab[data-tab]").forEach(b => b.classList.remove("is-active"));
         document.querySelectorAll(".storepanel").forEach(p => p.classList.remove("is-active"));

         const btn = document.querySelector('.storetab[data-tab="' + tabName + '"]');
         const panel = document.getElementById("tab-" + tabName);

         if (btn) btn.classList.add("is-active");
         if (panel) panel.classList.add("is-active");

         if (updateHash) {
            history.replaceState(null, "", "#" + tabName);
         }
      }

      // Wire up everything
      document.querySelectorAll(".storetab[data-tab]").forEach(btn => {
         btn.addEventListener("click", () => switchTab(btn.getAttribute("data-tab")));
      });

      let activeSizePopover = null;

      function closeSizePopover() {
         if (activeSizePopover) {
            if (activeSizePopover._cleanup) activeSizePopover._cleanup();
            activeSizePopover.remove();
            activeSizePopover = null;
         }
      }

      function positionSizePopover(anchorBtn, pop) {
         const rect = anchorBtn.getBoundingClientRect();

         // below button, right-aligned
         const popRect = pop.getBoundingClientRect();
         let left = rect.right - popRect.width;
         let top = rect.bottom + 8;

         // clamp to viewport
         left = Math.max(10, Math.min(left, window.innerWidth - popRect.width - 10));
         top = Math.max(10, Math.min(top, window.innerHeight - popRect.height - 10));

         pop.style.left = left + "px";
         pop.style.top = top + "px";
      }

      function openSizePopover(productEl, anchorBtn, selectEl, onPicked) {
         closeSizePopover();

         const rect = anchorBtn.getBoundingClientRect();

         const pop = document.createElement("div");
         pop.className = "size-popover";
         pop.innerHTML = `
		<div class="size-popover-title">Please select a size</div>
		<div class="size-popover-sub">Required for clothing items.</div>
		<div class="size-popover-list"></div>
	`;

         const list = pop.querySelector(".size-popover-list");

         // Build buttons from the existing hidden <select> options
         Array.from(selectEl.options).forEach(opt => {
            if (!opt.value) return; // skip "--"
            const b = document.createElement("button");
            b.type = "button";
            b.className = "size-popover-btn";
            b.textContent = opt.textContent;
            b.addEventListener("click", () => {
               selectEl.value = opt.value;
               closeSizePopover();
               onPicked(opt.value);
            });
            list.appendChild(b);
         });

         document.body.appendChild(pop);
         activeSizePopover = pop;

         const onScroll = () => positionSizePopover(anchorBtn, pop);
         const onResize = () => positionSizePopover(anchorBtn, pop);

         window.addEventListener("scroll", onScroll, true);
         window.addEventListener("resize", onResize);

         pop._cleanup = () => {
            window.removeEventListener("scroll", onScroll, true);
            window.removeEventListener("resize", onResize);
         };

         positionSizePopover(anchorBtn, pop);

         // Close behaviors
         setTimeout(() => {
            const onDocClick = (e) => {
               if (!activeSizePopover) return;
               if (activeSizePopover.contains(e.target)) return;
               if (anchorBtn.contains(e.target)) return;
               closeSizePopover();
               document.removeEventListener("mousedown", onDocClick);
            };
            document.addEventListener("mousedown", onDocClick);
         }, 0);
      }

      document.addEventListener("keydown", (e) => {
         if (e.key === "Escape") closeSizePopover();
      });

      document.querySelectorAll(".product .addbtn").forEach(btn => {
         btn.addEventListener("click", () => {
            const productEl = btn.closest(".product");

            // Clothing items have a <select> in the form. Music items do not.
            const selectEl = productEl.querySelector("select");

            // If there is a select and it is not chosen yet, prompt on click.
            if (selectEl) {
               const v = (selectEl.value || "").trim();
               if (!v) {
                  openSizePopover(productEl, btn, selectEl, () => addToCart(productEl));
                  return;
               }
            }

            addToCart(productEl);
         });
      });

      document.getElementById("cartBtn").addEventListener("click", () => {
         renderCart();
         openCart();
      });
      document.getElementById("cartClose").addEventListener("click", closeCart);
      document.getElementById("cartBackdrop").addEventListener("click", closeCart);

      document.getElementById("applyCoupon").addEventListener("click", () => {
         const v = (document.getElementById("coupon").value || "").trim();
         const msg = document.getElementById("couponMsg");
         if (!v) {
            msg.textContent = "Enter a code first.";
         } else {
            msg.textContent = 'Coupon "' + v + '" applied. Discount: 0%. Nice try though.';
         }
      });

      window.addEventListener("hashchange", () => {
         const tab = location.hash.replace("#", "");
         if (tab === "music" || tab === "clothing" || tab === "accessories") {
            switchTab(tab, false);
         }
      });

      // Init
      const startTab = location.hash.replace("#", "");
      if (startTab === "music" || startTab === "clothing" || startTab === "accessories") {
         switchTab(startTab, false);
      } else {
         switchTab("clothing", false);
      }

      renderCart();
   </script>
</body>

</html>